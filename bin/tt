#!/bin/bash

input=$1

target=$(ls ~/projects | fzf --filter $1)

if ! [ $target ]; then
	mkdir ~/projects/$input
	target=$input
fi

# We are currently inside of a tmux session, which means we need to switch over
# to the target session.
if [ -n "$TMUX" ]; then
	tmux has-session -t $target 2>/dev/null

	if [ $? == 0 ]; then
		tmux switch-client -t $target
	else
		tmux new-session -d -s $target -c ~/projects/$target
		tmux switch-client -t $target
	fi
else
	# Otherwise, we are not in a tmux session, which means we can start one as normal.
	tmux new -A -s $target -c ~/projects/$target
fi

